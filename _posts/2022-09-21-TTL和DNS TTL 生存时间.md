### TTL :

​			ICMP包的转发次数（跳数）

​	如下，ping使用icmp协议，TTL=128表示最多经过128跳。

```
C:\Users\wuleipeng>ping local.nethost.dev

正在 Ping local.nethost.dev [127.0.0.1] 具有 32 字节的数据:
来自 127.0.0.1 的回复: 字节=32 时间<1ms TTL=128
来自 127.0.0.1 的回复: 字节=32 时间<1ms TTL=128
来自 127.0.0.1 的回复: 字节=32 时间<1ms TTL=128
来自 127.0.0.1 的回复: 字节=32 时间<1ms TTL=128

127.0.0.1 的 Ping 统计信息:
    数据包: 已发送 = 4，已接收 = 4，丢失 = 0 (0% 丢失)，
往返行程的估计时间(以毫秒为单位):
    最短 = 0ms，最长 = 0ms，平均 = 0ms
```

TTL的主要作用是避免IP包在网络中的无限循环和收发，节省了网络资源，并能使IP包的发送者能收到告警消息。

TTL是IP数据包在计算机网络中可以转发的最大跳数。TTL字段由IP数据包的发送者设置，在IP数据包从源到目的的整个转发路径上，每经过一个路由器，路由器都会修改这个TTL字段值，具体的做法是把该TTL的值减1，然后再将IP包转发出去。如果在IP包到达目的IP之前，TTL减少为0，路由器将会丢弃收到的TTL=0的IP包并向IP包的发送者发送 ICMP time exceeded消息。

### DNS TTL :

​	   DNS记录在DNS服务器上缓存时间，目的是加快DNS解析。

​		例如：115blog.com 的 ip地址是 123.123.123.123 , 由cloudflare解析，DNS解析服务器：joel.ns.cloudflare.com 

本地DNS是8.8.8.8。

##### 1、当本地电脑第一次请求115blog.com时：

​		本地电脑先请求8.8.8.8，8.8.8.8向joel.ns.cloudflare.com查询DNS记录。返回给本地电脑ip地址。

##### 2、当本地电脑第二次请求115blog.com时（需要在一定的时间内，即DNS TTL）：

​		 8.8.8.8直接返回上次解析的ip地址，不再向joel.ns.cloudflare.com查询。

##### 3、超时后（超过DNS TTL时间后）：

​		再次重复1和2的过程

#####  4、结论

​		DNS  TTL 不能太大，太大会导致更新DNS记录后，DNS不能及时刷新，太小会导致频繁向服务器请求，降低解析速度。











